// script.js

/* Demo app logic: single-file SPA behavior */

/* --- sample data (adaptado ao curso) --- */
const COURSE = {
  title: "Conex√£o Pais e Filhos",
  modules: [
    { 
      id: 0, 
      title: "M√≥dulo 1: Tranquilizando os Pais", 
      description: "Acalmando preocupa√ß√µes comuns dos pais.", 
      img: "data:image/webp;base64,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", 
      locked: false,
      aulas: [
        { id: 0, title: "Aula 1: Introdu√ß√£o √†s Preocupa√ß√µes", video: "https://www.youtube.com/embed/hB1UNt93FN8?si=xtIJrg4rh3mC1Oxm", quizId: 0 },
        { id: 1, title: "Aula 2: Gerenciando Ansiedade", video: "https://www.youtube.com/embed/hB1UNt93FN8?si=xtIJrg4rh3mC1Oxm", quizId: 1 },
        { id: 2, title: "Aula 3: T√©cnicas de Respira√ß√£o", video: "https://www.youtube.com/embed/hB1UNt93FN8?si=xtIJrg4rh3mC1Oxm", quizId: null },
        { id: 3, title: "Aula 4: Comunica√ß√£o com Parceiro", video: "https://www.youtube.com/embed/placeholder4", quizId: null },
        { id: 4, title: "Aula 5: Reduzindo Estresse Di√°rio", video: "https://www.youtube.com/embed/placeholder5", quizId: null },
        { id: 5, title: "Aula 6: Autocuidado para Pais", video: "https://www.youtube.com/embed/placeholder6", quizId: null },
        { id: 6, title: "Aula 7: Lidando com Medos", video: "https://www.youtube.com/embed/placeholder7", quizId: null },
        { id: 7, title: "Aula 8: Revis√£o e Pr√°tica", video: "https://www.youtube.com/embed/placeholder8", quizId: null }
      ]
    },
    { 
      id: 1, 
      title: "M√≥dulo 2: Necessidades Essenciais das Crian√ßas", 
      description: "Entendendo o que as crian√ßas realmente precisam.", 
      img: "https://tse4.mm.bing.net/th/id/OIP.BpCJKOjnlx-_HRofn2QFxAHaEK?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3", 
      locked: true, 
      aulas: [
        { id: 0, title: "Aula 1: Necessidades B√°sicas", video: "https://www.youtube.com/embed/placeholder1", quizId: 2 },
        { id: 1, title: "Aula 2: Amor e Limites", video: "https://www.youtube.com/embed/vehTS91mObM?si=v6R6mgSRd8yhodni", quizId: 3 },
        { id: 2, title: "Aula 3: Seguran√ßa Emocional", video: "https://www.youtube.com/embed/placeholder3", quizId: null },
        { id: 3, title: "Aula 4: Estimula√ß√£o Cognitiva", video: "https://www.youtube.com/embed/placeholder4", quizId: null },
        { id: 4, title: "Aula 5: Rotina e Estrutura", video: "https://www.youtube.com/embed/placeholder5", quizId: null },
        { id: 5, title: "Aula 6: Nutri√ß√£o e Sa√∫de", video: "https://www.youtube.com/embed/placeholder6", quizId: null },
        { id: 6, title: "Aula 7: Brincadeira e Desenvolvimento", video: "https://www.youtube.com/embed/placeholder7", quizId: null },
        { id: 7, title: "Aula 8: Revis√£o das Necessidades", video: "https://www.youtube.com/embed/placeholder8", quizId: null }
      ]
    },
    { 
      id: 2, 
      title: "M√≥dulo 3: Quando as Coisas Acontecem Diferente do Esperado", 
      description: "Lidando com imprevistos na parentalidade.", 
      img: "https://tse3.mm.bing.net/th/id/OIP.hmheZT9EI0QhpXTHMk4cHgHaE8?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3", 
      locked: true, 
      aulas: [
        { id: 0, title: "Aula 1: Expectativas vs. Realidade", video: "https://www.youtube.com/embed/placeholder1", quizId: 4 },
        { id: 1, title: "Aula 2: Adapta√ß√£o a Mudan√ßas", video: "https://www.youtube.com/embed/placeholder2", quizId: null },
        { id: 2, title: "Aula 3: Conflitos Inesperados", video: "https://www.youtube.com/embed/placeholder3", quizId: null },
        { id: 3, title: "Aula 4: Resili√™ncia Familiar", video: "https://www.youtube.com/embed/placeholder4", quizId: null },
        { id: 4, title: "Aula 5: Planejamento Flex√≠vel", video: "https://www.youtube.com/embed/placeholder5", quizId: null },
        { id: 5, title: "Aula 6: Apoio em Crises", video: "https://www.youtube.com/embed/placeholder6", quizId: null },
        { id: 6, title: "Aula 7: Reconstruindo Confian√ßa", video: "https://www.youtube.com/embed/placeholder7", quizId: null },
        { id: 7, title: "Aula 8: Reflex√£o e Aprendizado", video: "https://www.youtube.com/embed/placeholder8", quizId: null }
      ]
    },
    { 
      id: 3, 
      title: "M√≥dulo 4: Solu√ß√µes e o 'Pulo do Gato'", 
      description: "Dicas pr√°ticas e solu√ß√µes inovadoras.", 
      img: "https://tse4.mm.bing.net/th/id/OIP.HQ3ujTd7WTyzECAHOTVfIgHaEK?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3", 
      locked: true, 
      aulas: [
        { id: 0, title: "Aula 1: Introdu√ß√£o √†s Solu√ß√µes", video: "https://www.youtube.com/embed/placeholder1", quizId: 5 },
        { id: 1, title: "Aula 2: Comunica√ß√£o Aberta", video: "https://www.youtube.com/embed/placeholder2", quizId: null },
        { id: 2, title: "Aula 3: Resolu√ß√£o de Conflitos", video: "https://www.youtube.com/embed/placeholder3", quizId: null },
        { id: 3, title: "Aula 4: O 'Pulo do Gato'", video: "https://www.youtube.com/embed/placeholder4", quizId: null },
        { id: 4, title: "Aula 5: Ferramentas Pr√°ticas", video: "https://www.youtube.com/embed/placeholder5", quizId: null },
        { id: 5, title: "Aula 6: Manuten√ß√£o de La√ßos", video: "https://www.youtube.com/embed/placeholder6", quizId: null },
        { id: 6, title: "Aula 7: Avalia√ß√£o de Progresso", video: "https://www.youtube.com/embed/placeholder7", quizId: null },
        { id: 7, title: "Aula 8: Conclus√£o e Pr√≥ximos Passos", video: "https://www.youtube.com/embed/placeholder8", quizId: null }
      ]
    }
  ],
  quizzes: [
    { q: "Por que √© importante tranquilizar os pais?", opts: ["Reduz ansiedade", "Melhora comunica√ß√£o", "Ambos", "Nenhum"], a: 2, explain: "Tranquilizar reduz ansiedade e melhora la√ßos." },
    { q: "Como gerenciar a ansiedade dos pais?", opts: ["Ignorar", "T√©cnicas de respira√ß√£o", "Aumentar estresse", "Nenhum"], a: 1, explain: "Respira√ß√£o ajuda a acalmar o sistema nervoso." },
    { q: "Quais s√£o necessidades essenciais das crian√ßas?", opts: ["Amor e limites", "Apenas divers√£o", "Isolamento", "Nenhum"], a: 0, explain: "Amor, seguran√ßa e limites s√£o chave." },
    { q: "O que 'Amor e Limites' significa?", opts: ["Regras sem afeto", "Afeto com estrutura", "Isolamento", "Nenhum"], a: 1, explain: "Equil√≠brio entre amor e discipline √© essencial." },
    { q: "O que fazer quando as coisas saem do esperado?", opts: ["Ignorar", "Adaptar e aprender", "Desistir", "Nenhum"], a: 1, explain: "Adapta√ß√£o promove resili√™ncia." },
    { q: "Qual √© o 'pulo do gato' em solu√ß√µes?", opts: ["Comunica√ß√£o aberta", "Puni√ß√µes", "Ignorar problemas", "Nenhum"], a: 0, explain: "Comunica√ß√£o √© essencial para solu√ß√µes." }
  ]
};

/* app state */
let state = {
  currentScreen: 'signup', // Come√ßa no sign up
  currentModuleIndex: 0,
  currentAulaIndex: 0,
  quizIndex: 0,
  correctCount: 0,
  totalQuiz: 1, // Por aula, exemplo
  unlockedModules: [0], // M√≥dulos desbloqueados inicialmente
  menuOpen: false,
  bookmarks: JSON.parse(localStorage.getItem('bookmarks')) || [],
  notes: localStorage.getItem('notes') || '',
  avatar: localStorage.getItem('avatar') || 'https://via.placeholder.com/48',
  darkMode: JSON.parse(localStorage.getItem('darkMode')) || false,
  tips: localStorage.getItem('tips') || ''
};

/* init */
function init() {
  renderModules();
  setTabActive('home');
  document.addEventListener('click', closeMenuOnOutsideClick);
  loadNotes();
  loadBookmarks();
  loadAvatar();
  toggleDarkMode(state.darkMode);
  loadTips();
}
init();

/* render modules list */
function renderModules() {
  const cont = document.getElementById('modules');
  cont.innerHTML = '';
  COURSE.modules.forEach((m, i) => {
    const el = document.createElement('div');
    el.className = 'module' + (m.locked && !state.unlockedModules.includes(i) ? ' locked' : '');
    el.innerHTML = `<img class="module-img" src="${m.img}" alt="${m.title}"><div><h3>${m.title}</h3><p>${m.description}</p><div style="margin-top:8px;font-size:13px;color:var(--muted)">8 aulas ‚Ä¢ At√© 8 min cada</div></div>`;
    if (!m.locked || state.unlockedModules.includes(i)) el.onclick = () => startModule(i);
    cont.appendChild(el);
  });
}

/* Start a module (show aulas) */
function startModule(index) {
  if (COURSE.modules[index].locked && !state.unlockedModules.includes(index)) return toast('M√≥dulo bloqueado!');
  state.currentModuleIndex = index;
  document.getElementById('module-title').textContent = COURSE.modules[index].title;
  document.getElementById('module-progress').textContent = `0 / 8`; // Placeholder, pode rastrear progresso
  renderAulas(index);
  nav('aulas');
  // Unlock next module
  if (index + 1 < COURSE.modules.length) state.unlockedModules.push(index + 1);
  renderModules();
}

/* Render aulas of module */
function renderAulas(moduleIndex) {
  const cont = document.getElementById('aulas-list');
  cont.innerHTML = '';
  COURSE.modules[moduleIndex].aulas.forEach((a, i) => {
    const el = document.createElement('div');
    el.className = 'aula';
    el.innerHTML = `<img class="aula-img" src="https://via.placeholder.com/80x60?text=A${i+1}" alt="${a.title}"><div><h3>${a.title}</h3><p>Aula de at√© 8 minutos.</p></div><button class="btn ghost" onclick="addBookmark(${moduleIndex}, ${i})">Marcar</button>`;
    el.onclick = () => startAula(moduleIndex, i);
    cont.appendChild(el);
  });
}

/* Start an aula */
function startAula(moduleIndex, aulaIndex) {
  state.currentAulaIndex = aulaIndex;
  state.quizIndex = 0;
  state.correctCount = 0;
  const aula = COURSE.modules[moduleIndex].aulas[aulaIndex];
  document.getElementById('aula-title').textContent = aula.title;
  document.getElementById('aula-video').src = aula.video;
  state.totalQuiz = aula.quizId !== null ? 1 : 0; // Um quiz por aula com quiz
  loadQuiz(aula.quizId);
  nav('aula');
}

/* navigation */
function nav(screen) {
  // hide all screens
  ['signup', 'home', 'aulas', 'aula', 'benefits', 'sentiments', 'profile', 'avatar', 'notes', 'tips', 'bookmarks', 'bio', 'final'].forEach(s => {
    const el = document.getElementById('screen-' + s);
    if (el) el.style.display = 'none';
  });
  // show chosen
  document.getElementById('screen-' + screen).style.display = 'block';

  state.currentScreen = screen;
  setTabActive(screen);
  closeMenu();
}

/* Set active tab for visual feedback (if needed in dropdown) */
function setTabActive(screen) {
  const tabs = document.querySelectorAll('.menu-dropdown .tab');
  tabs.forEach(tab => tab.classList.remove('active'));
  const activeTab = document.querySelector(`.menu-dropdown .tab[onclick*="nav('${screen}')"]`);
  if (activeTab) activeTab.classList.add('active');
}

/* Toggle menu dropdown */
function toggleMenu() {
  const menu = document.getElementById('menu-dropdown');
  state.menuOpen = !state.menuOpen;
  menu.classList.toggle('active', state.menuOpen);
}

/* Close menu if clicked outside */
function closeMenuOnOutsideClick(event) {
  const menu = document.getElementById('menu-dropdown');
  const button = document.querySelector('.nav-actions .icon');
  if (!menu.contains(event.target) && !button.contains(event.target)) {
    closeMenu();
  }
}

function closeMenu() {
  const menu = document.getElementById('menu-dropdown');
  if (state.menuOpen) {
    menu.classList.remove('active');
    state.menuOpen = false;
  }
}

/* Quiz rendering (adaptado por aula) */
function loadQuiz(quizId) {
  const area = document.getElementById('quiz-area');
  if (quizId === null) {
    area.innerHTML = `<div class="muted">Nenhum quiz para esta aula. Clique em Pr√≥ximo para concluir.</div>`;
    return;
  }
  const q = COURSE.quizzes[quizId];
  // build markup
  let html = `<div class="quiz"><div class="question">${q.q}</div><div class="options">`;
  q.opts.forEach((opt, i) => {
    html += `<div class="option" data-opt="${i}"><span>${opt}</span><strong style="opacity:0" class="icon">‚úì</strong></div>`;
  });
  html += `</div><div id="explain" style="display:none" class="explain"></div></div>`;
  area.innerHTML = html;

  // add listeners
  const opts = area.querySelectorAll('.option');
  opts.forEach(o => {
    o.addEventListener('click', () => {
      const chosen = parseInt(o.getAttribute('data-opt'));
      handleAnswer(q, chosen, o, opts);
    });
  });
}

/* Answer handling */
function handleAnswer(q, chosen, selectedEl, allOptions) {
  allOptions.forEach(x => x.style.pointerEvents = 'none');
  const correct = q.a;
  const explainEl = document.getElementById('explain');
  if (chosen === correct) {
    selectedEl.classList.add('correct');
    selectedEl.querySelector('.icon').style.opacity = 1;
    selectedEl.querySelector('.icon').textContent = '‚úîÔ∏è';
    state.correctCount++;
    explainEl.innerHTML = `<strong>Certo!</strong> ${q.explain}`;
  } else {
    selectedEl.classList.add('wrong');
    selectedEl.querySelector('.icon').style.opacity = 1;
    selectedEl.querySelector('.icon').textContent = '‚úñ';
    allOptions.forEach(opt => {
      if (parseInt(opt.getAttribute('data-opt')) === correct) {
        opt.classList.add('correct');
        opt.querySelector('.icon').style.opacity = 1;
        opt.querySelector('.icon').textContent = '‚úîÔ∏è';
      }
    });
    explainEl.innerHTML = `<strong>Resposta certa:</strong> ${q.opts[correct]}. <br>${q.explain}`;
  }
  explainEl.style.display = 'block';
}

/* Next quiz / finish (para aula) */
function nextQuiz() {
  if (state.totalQuiz === 0) {
    finishAula();
    return;
  }
  state.quizIndex++;
  if (state.quizIndex >= state.totalQuiz) {
    finishAula();
  } else {
    loadQuiz(); // Se mais quizzes
  }
}

/* Finish aula */
function finishAula() {
  const percent = Math.round((state.correctCount / (state.totalQuiz || 1)) * 100);
  document.getElementById('progress-num').textContent = percent + '%';
  const deg = Math.round((percent / 100) * 360);
  document.getElementById('progress-circle').style.background = `conic-gradient(var(--primary) 0deg ${deg}deg, #e6f0fb ${deg}deg 360deg)`;
  let percentile = 50 + Math.round(percent / 2);
  percentile = Math.min(98, percentile);
  document.getElementById('progress-sub').textContent = `Top ${percentile}% dos participantes`;
  document.getElementById('final-msg').textContent = `Voc√™ acertou ${state.correctCount} de ${state.totalQuiz}`;
  nav('final');
}

/* small toast (demo) */
function toast(txt) {
  alert(txt);
}

/* Fun√ß√µes adicionais */

/* Toggle Dark Mode */
function toggleDarkMode() {
  state.darkMode = !state.darkMode;
  document.body.classList.toggle('dark-mode', state.darkMode);
  document.getElementById('mode-icon').textContent = state.darkMode ? '‚òÄÔ∏è' : 'üåô';
  document.getElementById('mode-text').textContent = state.darkMode ? 'Modo Light' : 'Modo Dark';
  localStorage.setItem('darkMode', JSON.stringify(state.darkMode));
}

/* Update Avatar */
function updateAvatar(input) {
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      state.avatar = e.target.result;
      localStorage.setItem('avatar', state.avatar);
      document.getElementById('avatar-img').src = state.avatar;
    };
    reader.readAsDataURL(input.files[0]);
  }
}

/* Load Avatar */
function loadAvatar() {
  document.getElementById('avatar-img').src = state.avatar;
}

/* Select Avatar from Grid (opcional, para presets) */
function selectAvatar(element, src) {
  document.querySelectorAll('.avatar-option').forEach(opt => opt.classList.remove('selected'));
  element.classList.add('selected');
  state.avatar = src;
  localStorage.setItem('avatar', state.avatar);
  document.getElementById('avatar-img').src = state.avatar;
}

/* Save Notes */
function saveNotes() {
  state.notes = document.getElementById('notes-textarea').value;
  localStorage.setItem('notes', state.notes);
  toast('Notas salvas!');
}

/* Load Notes */
function loadNotes() {
  document.getElementById('notes-textarea').value = state.notes;
}

/* Add Bookmark */
function addBookmark(moduleIndex, aulaIndex) {
  const bookmark = { module: COURSE.modules[moduleIndex].title, aula: COURSE.modules[moduleIndex].aulas[aulaIndex].title, date: new Date().toLocaleDateString() };
  if (!state.bookmarks.some(b => b.aula === bookmark.aula)) {
    state.bookmarks.push(bookmark);
    localStorage.setItem('bookmarks', JSON.stringify(state.bookmarks));
    toast('Adicionado aos marcadores!');
    loadBookmarks();
  } else {
    toast('J√° marcado!');
  }
}

/* Load Bookmarks */
function loadBookmarks() {
  const list = document.getElementById('bookmarks-list');
  list.innerHTML = '';
  state.bookmarks.forEach((b, i) => {
    const li = document.createElement('li');
    li.innerHTML = `${b.module} - ${b.aula} (${b.date}) <button class="btn ghost" onclick="removeBookmark(${i})">Remover</button>`;
    list.appendChild(li);
  });
}

/* Remove Bookmark */
function removeBookmark(index) {
  state.bookmarks.splice(index, 1);
  localStorage.setItem('bookmarks', JSON.stringify(state.bookmarks));
  loadBookmarks();
}

/* Load Tips */
function loadTips() {
  const tipsList = document.getElementById('tips-list');
  if (state.tips) {
    tipsList.innerHTML = state.tips;
  }
}

/* Save Tips */
function saveTips() {
  state.tips = document.getElementById('tips-list').innerHTML;
  localStorage.setItem('tips', state.tips);
  toast('Dicas salvas!');
}
// Adicione esta fun√ß√£o ao seu script.js para destacar o bot√£o ativo
function updateFooterActiveButton(screen) {
  const buttons = document.querySelectorAll('.footer-btn');
  buttons.forEach(btn => {
    btn.classList.remove('active');
    
    // Mapeia as telas para os bot√µes correspondentes
    const screenMap = {
      'home': 0,
      'benefits': 1,
      'sentiments': 2,
      'profile': 3
    };
    
    if (screenMap[screen] !== undefined) {
      buttons[screenMap[screen]].classList.add('active');
    }
  });
}

// Modifique a fun√ß√£o nav para incluir a atualiza√ß√£o do footer
function nav(screen) {
  // hide all screens
  ['signup', 'home', 'aulas', 'aula', 'benefits', 'sentiments', 'profile', 'avatar', 'notes', 'tips', 'bookmarks', 'bio', 'final'].forEach(s => {
    const el = document.getElementById('screen-' + s);
    if (el) el.style.display = 'none';
  });
  // show chosen
  document.getElementById('screen-' + screen).style.display = 'block';

  state.currentScreen = screen;
  setTabActive(screen);
  updateFooterActiveButton(screen); // Adicionado
  closeMenu();
}
